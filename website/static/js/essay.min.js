angular.module("essay",["ngMaterial","hc.marked"]).config(["markedProvider",function(e){e.setOptions({gfm:!0,tables:!0,highlight:function(e,t){var n;return n=t?hljs.highlight(t,e,!0).value:hljs.highlightAuto(e).value}})}]).controller("essayController",["$http","$location","$scope","$cookies",function(e,t,n,a){var o,i,m;e({method:"POST",url:"/essay",data:{title:t.$$path.split("/")[2]}}).then(function(e){n.essay=e.data},function(e){console.log(e)}),o=this,e({method:"POST",url:"/essayComments",data:{title:t.$$path.split("/")[2]}}).then(function(e){o.comments=e.data},function(e){console.log(e)}),e({method:"POST",url:"/essayLikes",data:{title:t.$$path.split("/")[2]}}).then(function(e){o.likes=e.data},function(e){console.log(e)}),n.comment={},n.isKeepName=!1,n.comment.name="",i=a.get("isKeepName"),m=a.get("keepName"),"true"===i&&void 0!==m&&(n.isKeepName=!0,n.comment.name=m),this.submit=function(){var o,i,m;(o=0===document.getElementById("textError").getElementsByTagName("*").length&&0===document.getElementById("nameError").getElementsByTagName("*").length)&&(a.put("isKeepName",n.isKeepName),a.put("keepName",n.comment.name),o=this,i=addComment.name.value,n.isKeepName===!1&&(addComment.name.value=""),m=addComment.text.value,addComment.text.value="",e({method:"POST",url:"/addEssayComments",data:{title:t.$$path.split("/")[2],name:i,text:m}}).then(function(e){o.comments=e.data},function(e){console.log(e)}))},this.plusOneToLikes=function(){e({method:"POST",url:"/likeAnEssay",data:{title:t.$$path.split("/")[2]}}).then(function(e){o.likes=e.data},function(e){console.log(e)})},this.back=function(){window.history.back()}}]);